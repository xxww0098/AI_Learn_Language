# 04 - è·¯ç”±ç®¡ç†

## React Router åŸºç¡€

React Router æ˜¯ React åº”ç”¨ä¸­æœ€å¸¸ç”¨çš„è·¯ç”±åº“ï¼Œç”¨äºå®ç°å•é¡µåº”ç”¨çš„é¡µé¢å¯¼èˆªã€‚

### å®‰è£…å’ŒåŸºæœ¬è®¾ç½®
```bash
npm install react-router-dom
```

### åŸºç¡€è·¯ç”±é…ç½®
```jsx
import React from 'react';
import { 
  BrowserRouter as Router, 
  Routes, 
  Route, 
  Link, 
  useNavigate,
  useParams,
  useLocation
} from 'react-router-dom';

// é¡µé¢ç»„ä»¶
function Home() {
  return (
    <div>
      <h2>é¦–é¡µ</h2>
      <p>æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„ç½‘ç«™ï¼</p>
    </div>
  );
}

function About() {
  return (
    <div>
      <h2>å…³äºæˆ‘ä»¬</h2>
      <p>è¿™é‡Œæ˜¯å…³äºæˆ‘ä»¬çš„ä¿¡æ¯ã€‚</p>
    </div>
  );
}

function Contact() {
  const navigate = useNavigate();
  
  const handleSubmit = (e) => {
    e.preventDefault();
    alert('æ¶ˆæ¯å·²å‘é€ï¼');
    navigate('/'); // ç¼–ç¨‹å¼å¯¼èˆªåˆ°é¦–é¡µ
  };
  
  return (
    <div>
      <h2>è”ç³»æˆ‘ä»¬</h2>
      <form onSubmit={handleSubmit}>
        <div>
          <input type="text" placeholder="å§“å" required />
        </div>
        <div>
          <textarea placeholder="æ¶ˆæ¯å†…å®¹" required></textarea>
        </div>
        <button type="submit">å‘é€æ¶ˆæ¯</button>
      </form>
    </div>
  );
}

// å¯¼èˆªç»„ä»¶
function Navigation() {
  const location = useLocation();
  
  return (
    <nav style={{ 
      padding: '20px', 
      borderBottom: '1px solid #ddd',
      backgroundColor: '#f8f9fa' 
    }}>
      <ul style={{ 
        listStyle: 'none', 
        display: 'flex', 
        gap: '20px',
        margin: 0,
        padding: 0
      }}>
        <li>
          <Link 
            to="/" 
            style={{ 
              textDecoration: 'none',
              color: location.pathname === '/' ? '#007bff' : '#333',
              fontWeight: location.pathname === '/' ? 'bold' : 'normal'
            }}
          >
            é¦–é¡µ
          </Link>
        </li>
        <li>
          <Link 
            to="/about"
            style={{ 
              textDecoration: 'none',
              color: location.pathname === '/about' ? '#007bff' : '#333',
              fontWeight: location.pathname === '/about' ? 'bold' : 'normal'
            }}
          >
            å…³äºæˆ‘ä»¬
          </Link>
        </li>
        <li>
          <Link 
            to="/contact"
            style={{ 
              textDecoration: 'none',
              color: location.pathname === '/contact' ? '#007bff' : '#333',
              fontWeight: location.pathname === '/contact' ? 'bold' : 'normal'
            }}
          >
            è”ç³»æˆ‘ä»¬
          </Link>
        </li>
      </ul>
    </nav>
  );
}

// ä¸»åº”ç”¨ç»„ä»¶
function App() {
  return (
    <Router>
      <div>
        <Navigation />
        <div style={{ padding: '20px' }}>
          <Routes>
            <Route path="/" element={<Home />} />
            <Route path="/about" element={<About />} />
            <Route path="/contact" element={<Contact />} />
          </Routes>
        </div>
      </div>
    </Router>
  );
}
```

## åŠ¨æ€è·¯ç”±å’Œå‚æ•°

### URL å‚æ•°å¤„ç†
```jsx
import React, { useState, useEffect } from 'react';
import { useParams, useSearchParams, Link } from 'react-router-dom';

// ç”¨æˆ·è¯¦æƒ…ç»„ä»¶
function UserProfile() {
  const { userId } = useParams();
  const [searchParams, setSearchParams] = useSearchParams();
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  
  const tab = searchParams.get('tab') || 'profile';
  
  useEffect(() => {
    // æ¨¡æ‹Ÿ API è¯·æ±‚
    const fetchUser = async () => {
      setLoading(true);
      // æ¨¡æ‹Ÿå»¶è¿Ÿ
      await new Promise(resolve => setTimeout(resolve, 500));
      
      // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®
      const userData = {
        id: userId,
        name: `ç”¨æˆ· ${userId}`,
        email: `user${userId}@example.com`,
        bio: `è¿™æ˜¯ç”¨æˆ· ${userId} çš„ä¸ªäººç®€ä»‹ã€‚`,
        posts: [
          { id: 1, title: 'æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ', date: '2024-01-15' },
          { id: 2, title: 'å­¦ä¹  React çš„å¿ƒå¾—', date: '2024-01-20' },
          { id: 3, title: 'å‰ç«¯å¼€å‘æŠ€å·§åˆ†äº«', date: '2024-01-25' }
        ],
        followers: Math.floor(Math.random() * 1000),
        following: Math.floor(Math.random() * 500)
      };
      
      setUser(userData);
      setLoading(false);
    };
    
    fetchUser();
  }, [userId]);
  
  const handleTabChange = (newTab) => {
    setSearchParams({ tab: newTab });
  };
  
  if (loading) {
    return <div>åŠ è½½ä¸­...</div>;
  }
  
  if (!user) {
    return <div>ç”¨æˆ·ä¸å­˜åœ¨</div>;
  }
  
  return (
    <div style={{ padding: '20px' }}>
      <div style={{ marginBottom: '20px' }}>
        <h2>{user.name}</h2>
        <p>{user.email}</p>
      </div>
      
      {/* æ ‡ç­¾é¡µå¯¼èˆª */}
      <div style={{ 
        borderBottom: '1px solid #ddd', 
        marginBottom: '20px' 
      }}>
        {['profile', 'posts', 'followers'].map(tabName => (
          <button
            key={tabName}
            onClick={() => handleTabChange(tabName)}
            style={{
              padding: '10px 20px',
              border: 'none',
              backgroundColor: tab === tabName ? '#007bff' : 'transparent',
              color: tab === tabName ? 'white' : '#333',
              cursor: 'pointer',
              marginRight: '10px'
            }}
          >
            {tabName === 'profile' && 'ä¸ªäººèµ„æ–™'}
            {tabName === 'posts' && 'æ–‡ç« '}
            {tabName === 'followers' && 'å…³æ³¨è€…'}
          </button>
        ))}
      </div>
      
      {/* æ ‡ç­¾é¡µå†…å®¹ */}
      {tab === 'profile' && (
        <div>
          <h3>ä¸ªäººèµ„æ–™</h3>
          <p><strong>ä¸ªäººç®€ä»‹ï¼š</strong>{user.bio}</p>
          <p><strong>å…³æ³¨è€…ï¼š</strong>{user.followers}</p>
          <p><strong>å…³æ³¨ä¸­ï¼š</strong>{user.following}</p>
        </div>
      )}
      
      {tab === 'posts' && (
        <div>
          <h3>æ–‡ç« åˆ—è¡¨</h3>
          {user.posts.map(post => (
            <div key={post.id} style={{ 
              padding: '15px', 
              border: '1px solid #eee', 
              marginBottom: '10px',
              borderRadius: '5px'
            }}>
              <h4>{post.title}</h4>
              <p style={{ color: '#666', fontSize: '14px' }}>{post.date}</p>
              <Link to={`/posts/${post.id}`}>é˜…è¯»å…¨æ–‡</Link>
            </div>
          ))}
        </div>
      )}
      
      {tab === 'followers' && (
        <div>
          <h3>å…³æ³¨è€…</h3>
          <p>å…±æœ‰ {user.followers} ä½å…³æ³¨è€…</p>
          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))', gap: '10px' }}>
            {Array.from({ length: Math.min(6, user.followers) }, (_, i) => (
              <div key={i} style={{ 
                padding: '10px', 
                border: '1px solid #ddd',
                borderRadius: '5px',
                textAlign: 'center'
              }}>
                <div>ç”¨æˆ· {i + 1}</div>
                <Link to={`/users/${i + 1}`}>æŸ¥çœ‹èµ„æ–™</Link>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}

// ç”¨æˆ·åˆ—è¡¨ç»„ä»¶
function UserList() {
  const users = Array.from({ length: 10 }, (_, i) => ({
    id: i + 1,
    name: `ç”¨æˆ· ${i + 1}`,
    email: `user${i + 1}@example.com`
  }));
  
  return (
    <div style={{ padding: '20px' }}>
      <h2>ç”¨æˆ·åˆ—è¡¨</h2>
      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '15px' }}>
        {users.map(user => (
          <div key={user.id} style={{ 
            padding: '15px', 
            border: '1px solid #ddd',
            borderRadius: '5px'
          }}>
            <h4>{user.name}</h4>
            <p>{user.email}</p>
            <Link 
              to={`/users/${user.id}`}
              style={{ 
                color: '#007bff', 
                textDecoration: 'none' 
              }}
            >
              æŸ¥çœ‹è¯¦æƒ…
            </Link>
          </div>
        ))}
      </div>
    </div>
  );
}
```

## åµŒå¥—è·¯ç”±

### å¤æ‚é¡µé¢ç»“æ„
```jsx
import React from 'react';
import { Routes, Route, Link, Outlet, useParams } from 'react-router-dom';

// ä»ªè¡¨æ¿å¸ƒå±€ç»„ä»¶
function DashboardLayout() {
  return (
    <div style={{ display: 'flex', minHeight: '100vh' }}>
      {/* ä¾§è¾¹æ  */}
      <div style={{ 
        width: '250px', 
        backgroundColor: '#f8f9fa', 
        padding: '20px',
        borderRight: '1px solid #ddd'
      }}>
        <h3>ä»ªè¡¨æ¿</h3>
        <nav>
          <ul style={{ listStyle: 'none', padding: 0 }}>
            <li style={{ marginBottom: '10px' }}>
              <Link 
                to="/dashboard" 
                style={{ textDecoration: 'none', color: '#333' }}
              >
                ğŸ“Š æ¦‚è§ˆ
              </Link>
            </li>
            <li style={{ marginBottom: '10px' }}>
              <Link 
                to="/dashboard/analytics" 
                style={{ textDecoration: 'none', color: '#333' }}
              >
                ğŸ“ˆ åˆ†æ
              </Link>
            </li>
            <li style={{ marginBottom: '10px' }}>
              <Link 
                to="/dashboard/users" 
                style={{ textDecoration: 'none', color: '#333' }}
              >
                ğŸ‘¥ ç”¨æˆ·ç®¡ç†
              </Link>
            </li>
            <li style={{ marginBottom: '10px' }}>
              <Link 
                to="/dashboard/products" 
                style={{ textDecoration: 'none', color: '#333' }}
              >
                ğŸ“¦ äº§å“ç®¡ç†
              </Link>
            </li>
            <li style={{ marginBottom: '10px' }}>
              <Link 
                to="/dashboard/settings" 
                style={{ textDecoration: 'none', color: '#333' }}
              >
                âš™ï¸ è®¾ç½®
              </Link>
            </li>
          </ul>
        </nav>
      </div>
      
      {/* ä¸»å†…å®¹åŒº */}
      <div style={{ flex: 1, padding: '20px' }}>
        <Outlet />
      </div>
    </div>
  );
}

// ä»ªè¡¨æ¿é¦–é¡µ
function DashboardHome() {
  return (
    <div>
      <h2>ä»ªè¡¨æ¿æ¦‚è§ˆ</h2>
      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '20px' }}>
        <div style={{ padding: '20px', backgroundColor: '#e3f2fd', borderRadius: '5px' }}>
          <h4>æ€»ç”¨æˆ·æ•°</h4>
          <p style={{ fontSize: '2em', margin: 0 }}>1,234</p>
        </div>
        <div style={{ padding: '20px', backgroundColor: '#e8f5e8', borderRadius: '5px' }}>
          <h4>æ€»é”€å”®é¢</h4>
          <p style={{ fontSize: '2em', margin: 0 }}>Â¥56,789</p>
        </div>
        <div style={{ padding: '20px', backgroundColor: '#fff3e0', borderRadius: '5px' }}>
          <h4>è®¢å•æ•°é‡</h4>
          <p style={{ fontSize: '2em', margin: 0 }}>456</p>
        </div>
        <div style={{ padding: '20px', backgroundColor: '#fce4ec', borderRadius: '5px' }}>
          <h4>äº§å“æ•°é‡</h4>
          <p style={{ fontSize: '2em', margin: 0 }}>89</p>
        </div>
      </div>
    </div>
  );
}

// åˆ†æé¡µé¢
function Analytics() {
  return (
    <div>
      <h2>æ•°æ®åˆ†æ</h2>
      <div style={{ marginBottom: '20px' }}>
        <h3>é”€å”®è¶‹åŠ¿</h3>
        <div style={{ 
          height: '200px', 
          backgroundColor: '#f5f5f5', 
          border: '1px solid #ddd',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center'
        }}>
          <p>å›¾è¡¨å ä½ç¬¦ - è¿™é‡Œå¯ä»¥æ”¾ç½®çœŸå®çš„å›¾è¡¨ç»„ä»¶</p>
        </div>
      </div>
      <div>
        <h3>ç”¨æˆ·æ´»è·ƒåº¦</h3>
        <div style={{ 
          height: '200px', 
          backgroundColor: '#f5f5f5', 
          border: '1px solid #ddd',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center'
        }}>
          <p>å›¾è¡¨å ä½ç¬¦ - ç”¨æˆ·æ´»è·ƒåº¦ç»Ÿè®¡</p>
        </div>
      </div>
    </div>
  );
}

// äº§å“ç®¡ç†é¡µé¢
function ProductManagement() {
  return (
    <div>
      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
        <h2>äº§å“ç®¡ç†</h2>
        <Link 
          to="/dashboard/products/new"
          style={{
            backgroundColor: '#007bff',
            color: 'white',
            padding: '8px 16px',
            borderRadius: '4px',
            textDecoration: 'none'
          }}
        >
          æ·»åŠ äº§å“
        </Link>
      </div>
      
      <div>
        <h3>äº§å“åˆ—è¡¨</h3>
        <nav style={{ marginBottom: '20px' }}>
          <Link to="/dashboard/products" style={{ marginRight: '20px' }}>å…¨éƒ¨äº§å“</Link>
          <Link to="/dashboard/products/category/electronics" style={{ marginRight: '20px' }}>ç”µå­äº§å“</Link>
          <Link to="/dashboard/products/category/clothing">æœè£…</Link>
        </nav>
        
        <Outlet />
      </div>
    </div>
  );
}

// äº§å“åˆ—è¡¨
function ProductList() {
  const products = [
    { id: 1, name: 'æ™ºèƒ½æ‰‹æœº', category: 'electronics', price: 2999 },
    { id: 2, name: 'ç¬”è®°æœ¬ç”µè„‘', category: 'electronics', price: 5999 },
    { id: 3, name: 'Tæ¤', category: 'clothing', price: 99 },
    { id: 4, name: 'ç‰›ä»”è£¤', category: 'clothing', price: 299 }
  ];
  
  return (
    <div>
      <table style={{ width: '100%', borderCollapse: 'collapse' }}>
        <thead>
          <tr>
            <th style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'left' }}>ID</th>
            <th style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'left' }}>åç§°</th>
            <th style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'left' }}>åˆ†ç±»</th>
            <th style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'left' }}>ä»·æ ¼</th>
            <th style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'left' }}>æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          {products.map(product => (
            <tr key={product.id}>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>{product.id}</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>{product.name}</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>{product.category}</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>Â¥{product.price}</td>
              <td style={{ border: '1px solid #ddd', padding: '8px' }}>
                <Link to={`/dashboard/products/${product.id}/edit`}>ç¼–è¾‘</Link>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}

// æŒ‰åˆ†ç±»çš„äº§å“åˆ—è¡¨
function ProductsByCategory() {
  const { category } = useParams();
  
  const allProducts = [
    { id: 1, name: 'æ™ºèƒ½æ‰‹æœº', category: 'electronics', price: 2999 },
    { id: 2, name: 'ç¬”è®°æœ¬ç”µè„‘', category: 'electronics', price: 5999 },
    { id: 3, name: 'Tæ¤', category: 'clothing', price: 99 },
    { id: 4, name: 'ç‰›ä»”è£¤', category: 'clothing', price: 299 }
  ];
  
  const filteredProducts = allProducts.filter(product => product.category === category);
  
  return (
    <div>
      <h4>åˆ†ç±»ï¼š{category === 'electronics' ? 'ç”µå­äº§å“' : 'æœè£…'}</h4>
      {filteredProducts.length === 0 ? (
        <p>è¯¥åˆ†ç±»ä¸‹æš‚æ— äº§å“</p>
      ) : (
        <div>
          {filteredProducts.map(product => (
            <div key={product.id} style={{ 
              padding: '10px', 
              border: '1px solid #ddd', 
              marginBottom: '10px',
              borderRadius: '4px'
            }}>
              <h5>{product.name}</h5>
              <p>ä»·æ ¼ï¼šÂ¥{product.price}</p>
              <Link to={`/dashboard/products/${product.id}/edit`}>ç¼–è¾‘</Link>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}

// æ·»åŠ äº§å“é¡µé¢
function AddProduct() {
  const [product, setProduct] = useState({
    name: '',
    category: 'electronics',
    price: ''
  });
  
  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('æ·»åŠ äº§å“:', product);
    alert('äº§å“æ·»åŠ æˆåŠŸï¼');
  };
  
  return (
    <div>
      <h2>æ·»åŠ æ–°äº§å“</h2>
      <form onSubmit={handleSubmit}>
        <div style={{ marginBottom: '15px' }}>
          <label>äº§å“åç§°ï¼š</label>
          <input
            type="text"
            value={product.name}
            onChange={(e) => setProduct(prev => ({ ...prev, name: e.target.value }))}
            required
          />
        </div>
        
        <div style={{ marginBottom: '15px' }}>
          <label>åˆ†ç±»ï¼š</label>
          <select
            value={product.category}
            onChange={(e) => setProduct(prev => ({ ...prev, category: e.target.value }))}
          >
            <option value="electronics">ç”µå­äº§å“</option>
            <option value="clothing">æœè£…</option>
          </select>
        </div>
        
        <div style={{ marginBottom: '15px' }}>
          <label>ä»·æ ¼ï¼š</label>
          <input
            type="number"
            value={product.price}
            onChange={(e) => setProduct(prev => ({ ...prev, price: e.target.value }))}
            required
          />
        </div>
        
        <button type="submit">æ·»åŠ äº§å“</button>
      </form>
    </div>
  );
}
```

## è·¯ç”±å®ˆå«å’Œæƒé™æ§åˆ¶

### è®¤è¯å’Œæˆæƒ
```jsx
import React, { createContext, useContext, useState } from 'react';
import { Navigate, useLocation } from 'react-router-dom';

// è®¤è¯ä¸Šä¸‹æ–‡
const AuthContext = createContext();

function AuthProvider({ children }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(false);
  
  const login = async (credentials) => {
    setLoading(true);
    // æ¨¡æ‹Ÿç™»å½• API è¯·æ±‚
    await new Promise(resolve => setTimeout(resolve, 1000));
    
    const userData = {
      id: 1,
      username: credentials.username,
      role: credentials.username === 'admin' ? 'admin' : 'user',
      email: `${credentials.username}@example.com`
    };
    
    setUser(userData);
    setLoading(false);
    return userData;
  };
  
  const logout = () => {
    setUser(null);
  };
  
  const value = {
    user,
    login,
    logout,
    loading,
    isAuthenticated: !!user,
    isAdmin: user?.role === 'admin'
  };
  
  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  );
}

function useAuth() {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
}

// å—ä¿æŠ¤çš„è·¯ç”±ç»„ä»¶
function ProtectedRoute({ children, requireAdmin = false }) {
  const { isAuthenticated, isAdmin, loading } = useAuth();
  const location = useLocation();
  
  if (loading) {
    return <div>éªŒè¯ä¸­...</div>;
  }
  
  if (!isAuthenticated) {
    // é‡å®šå‘åˆ°ç™»å½•é¡µï¼Œå¹¶ä¿å­˜å½“å‰è·¯å¾„
    return <Navigate to="/login" state={{ from: location }} replace />;
  }
  
  if (requireAdmin && !isAdmin) {
    return <div>æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®æ­¤é¡µé¢</div>;
  }
  
  return children;
}

// ç™»å½•ç»„ä»¶
function Login() {
  const [credentials, setCredentials] = useState({
    username: '',
    password: ''
  });
  const [error, setError] = useState('');
  
  const { login, loading } = useAuth();
  const location = useLocation();
  const navigate = useNavigate();
  
  const from = location.state?.from?.pathname || '/dashboard';
  
  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    
    try {
      await login(credentials);
      navigate(from, { replace: true });
    } catch (err) {
      setError('ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç ');
    }
  };
  
  return (
    <div style={{ 
      display: 'flex', 
      justifyContent: 'center', 
      alignItems: 'center', 
      minHeight: '100vh' 
    }}>
      <form onSubmit={handleSubmit} style={{ 
        padding: '40px', 
        border: '1px solid #ddd', 
        borderRadius: '8px',
        minWidth: '300px'
      }}>
        <h2 style={{ textAlign: 'center', marginBottom: '30px' }}>ç”¨æˆ·ç™»å½•</h2>
        
        {error && (
          <div style={{ 
            color: 'red', 
            marginBottom: '15px', 
            textAlign: 'center' 
          }}>
            {error}
          </div>
        )}
        
        <div style={{ marginBottom: '15px' }}>
          <input
            type="text"
            value={credentials.username}
            onChange={(e) => setCredentials(prev => ({ ...prev, username: e.target.value }))}
            placeholder="ç”¨æˆ·å (è¯•è¯• 'admin' æˆ– 'user')"
            required
            style={{ width: '100%', padding: '8px' }}
          />
        </div>
        
        <div style={{ marginBottom: '20px' }}>
          <input
            type="password"
            value={credentials.password}
            onChange={(e) => setCredentials(prev => ({ ...prev, password: e.target.value }))}
            placeholder="å¯†ç "
            required
            style={{ width: '100%', padding: '8px' }}
          />
        </div>
        
        <button 
          type="submit" 
          disabled={loading}
          style={{ 
            width: '100%', 
            padding: '10px',
            backgroundColor: '#007bff',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: loading ? 'not-allowed' : 'pointer'
          }}
        >
          {loading ? 'ç™»å½•ä¸­...' : 'ç™»å½•'}
        </button>
        
        <div style={{ marginTop: '15px', fontSize: '14px', color: '#666' }}>
          <p>æç¤ºï¼š</p>
          <p>â€¢ ä½¿ç”¨ 'admin' è·å¾—ç®¡ç†å‘˜æƒé™</p>
          <p>â€¢ ä½¿ç”¨ 'user' è·å¾—æ™®é€šç”¨æˆ·æƒé™</p>
        </div>
      </form>
    </div>
  );
}

// ç”¨æˆ·èœå•ç»„ä»¶
function UserMenu() {
  const { user, logout } = useAuth();
  
  return (
    <div style={{ 
      position: 'absolute', 
      top: '20px', 
      right: '20px',
      display: 'flex',
      alignItems: 'center',
      gap: '10px'
    }}>
      <span>æ¬¢è¿ï¼Œ{user.username}!</span>
      <span style={{ 
        backgroundColor: user.role === 'admin' ? '#dc3545' : '#28a745',
        color: 'white',
        padding: '2px 8px',
        borderRadius: '4px',
        fontSize: '12px'
      }}>
        {user.role === 'admin' ? 'ç®¡ç†å‘˜' : 'ç”¨æˆ·'}
      </span>
      <button onClick={logout}>é€€å‡ºç™»å½•</button>
    </div>
  );
}

// ç®¡ç†å‘˜ä¸“ç”¨é¡µé¢
function AdminPanel() {
  return (
    <div>
      <h2>ç®¡ç†å‘˜é¢æ¿</h2>
      <div style={{ backgroundColor: '#fff3cd', padding: '15px', borderRadius: '5px' }}>
        <h4>âš ï¸ ç®¡ç†å‘˜ä¸“ç”¨åŠŸèƒ½</h4>
        <p>è¿™ä¸ªé¡µé¢åªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®ã€‚</p>
        <ul>
          <li>ç”¨æˆ·æƒé™ç®¡ç†</li>
          <li>ç³»ç»Ÿé…ç½®</li>
          <li>æ•°æ®å¤‡ä»½ä¸æ¢å¤</li>
          <li>å®‰å…¨å®¡è®¡æ—¥å¿—</li>
        </ul>
      </div>
    </div>
  );
}
```

## è·¯ç”±åŠ¨ç”»å’Œè¿‡æ¸¡

### é¡µé¢åˆ‡æ¢åŠ¨ç”»
```jsx
import React from 'react';
import { useLocation } from 'react-router-dom';
import { CSSTransition, TransitionGroup } from 'react-transition-group';

// åŠ¨ç”»æ ·å¼ï¼ˆé€šå¸¸æ”¾åœ¨ CSS æ–‡ä»¶ä¸­ï¼‰
const animationStyles = `
  .page-enter {
    opacity: 0;
    transform: translateX(100px);
  }
  
  .page-enter-active {
    opacity: 1;
    transform: translateX(0);
    transition: opacity 300ms, transform 300ms;
  }
  
  .page-exit {
    opacity: 1;
    transform: translateX(0);
  }
  
  .page-exit-active {
    opacity: 0;
    transform: translateX(-100px);
    transition: opacity 300ms, transform 300ms;
  }
  
  .fade-enter {
    opacity: 0;
  }
  
  .fade-enter-active {
    opacity: 1;
    transition: opacity 300ms;
  }
  
  .fade-exit {
    opacity: 1;
  }
  
  .fade-exit-active {
    opacity: 0;
    transition: opacity 300ms;
  }
`;

function AnimatedRoutes() {
  const location = useLocation();
  
  return (
    <>
      <style>{animationStyles}</style>
      <TransitionGroup>
        <CSSTransition
          key={location.pathname}
          classNames="page"
          timeout={300}
        >
          <div style={{ position: 'absolute', width: '100%' }}>
            <Routes location={location}>
              <Route path="/" element={<Home />} />
              <Route path="/about" element={<About />} />
              <Route path="/contact" element={<Contact />} />
            </Routes>
          </div>
        </CSSTransition>
      </TransitionGroup>
    </>
  );
}
```

## ç»ƒä¹ ä»»åŠ¡

1. åˆ›å»ºä¸€ä¸ªåšå®¢åº”ç”¨ï¼Œæ”¯æŒæ–‡ç« åˆ—è¡¨ã€è¯¦æƒ…é¡µå’Œåˆ†ç±»æµè§ˆ
2. å®ç°ä¸€ä¸ªç”µå•†åº”ç”¨çš„è·¯ç”±ç»“æ„ï¼ŒåŒ…å«å•†å“åˆ—è¡¨ã€è¯¦æƒ…ã€è´­ç‰©è½¦ç­‰é¡µé¢
3. åˆ¶ä½œä¸€ä¸ªå¤šçº§å¯¼èˆªèœå•ï¼Œæ”¯æŒé¢åŒ…å±‘å¯¼èˆª

## ä¸‹ä¸€æ­¥

æŒæ¡è·¯ç”±ç®¡ç†åï¼Œä¸‹ä¸€ç« å°†å­¦ä¹  HTTP è¯·æ±‚ä¸æ•°æ®è·å–çš„é«˜çº§æŠ€å·§ã€‚